(function(e){function t(t){for(var n,o,c=t[0],i=t[1],s=t[2],f=0,l=[];f<c.length;f++)o=c[f],u[o]&&l.push(u[o][0]),u[o]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n]);m&&m(t);while(l.length)l.shift()();return a.push.apply(a,s||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],n=!0,o=1;o<r.length;o++){var c=r[o];0!==u[c]&&(n=!1)}n&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var n={},o={app:0},u={app:0},a=[];function c(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"27306711"}[e]+".js"}function i(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.e=function(e){var t=[],r={about:1};o[e]?t.push(o[e]):0!==o[e]&&r[e]&&t.push(o[e]=new Promise(function(t,r){for(var n="css/"+({about:"about"}[e]||e)+"."+{about:"98122229"}[e]+".css",u=i.p+n,a=document.getElementsByTagName("link"),c=0;c<a.length;c++){var s=a[c],f=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(f===n||f===u))return t()}var l=document.getElementsByTagName("style");for(c=0;c<l.length;c++){s=l[c],f=s.getAttribute("data-href");if(f===n||f===u)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var n=t&&t.target&&t.target.src||u,a=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");a.request=n,delete o[e],m.parentNode.removeChild(m),r(a)},m.href=u;var d=document.getElementsByTagName("head")[0];d.appendChild(m)}).then(function(){o[e]=0}));var n=u[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,r){n=u[e]=[t,r]});t.push(n[2]=a);var s,f=document.createElement("script");f.charset="utf-8",f.timeout=120,i.nc&&f.setAttribute("nonce",i.nc),f.src=c(e),s=function(t){f.onerror=f.onload=null,clearTimeout(l);var r=u[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src,a=new Error("Loading chunk "+e+" failed.\n("+n+": "+o+")");a.type=n,a.request=o,r[1](a)}u[e]=void 0}};var l=setTimeout(function(){s({type:"timeout",target:f})},12e4);f.onerror=f.onload=s,document.head.appendChild(f)}return Promise.all(t)},i.m=e,i.c=n,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(r,n,function(t){return e[t]}.bind(null,n));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],f=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var m=f;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},1:function(e,t){},"56d7":function(e,t,r){"use strict";r.r(t);r("cadf"),r("551c"),r("f751"),r("097d");var n=r("2b0e"),o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},u=[],a=(r("7f7f"),r("cebc")),c=r("2f62"),i=r("f499"),s=r.n(i),f=r("8055"),l=r.n(f),m={data:function(){return{}},computed:Object(a["a"])({},Object(c["c"])(["currentUser","currentRoom"])),methods:Object(a["a"])({},Object(c["d"])(["setSocket","clearCurrentUser","clearCurrentRoom"])),created:function(){var e=this;sessionStorage.getItem("currentUser")&&2===performance.navigation.type&&(this.clearCurrentUser(),this.clearCurrentRoom());var t=this,r={path:"/socket",query:{currentUser:s()(this.currentUser),currentRoom:this.currentRoom},autoConnect:!1},n=l()(window.location.origin,r);this.setSocket(n),n.open(),n.on("disconnect",function(e){console.log(e),"io server disconnect"===e&&t.socket.connect()}),n.on("reconnect_attempt",function(){t.socket.io.opts.query={currentUser:s()(e.currentUser),currentRoom:e.currentRoom}})},beforeDestroy:function(){this.socket.close()}},d={name:"app",mixins:[m],data:function(){return{}},computed:Object(a["a"])({},Object(c["e"])(["currentRoom"]),Object(c["c"])(["socket","currentUser"]),{path:function(){var e=this.currentUser,t=this.currentRoom;return e?t?"/arena/".concat(this.currentRoom):"/arena":"/"}}),methods:Object(a["a"])({},Object(c["d"])(["updatePlayerList","updateRoomList"]),Object(c["b"])(["confirmSignIn","confirmSignOut","leaveRoom"])),mounted:function(){var e=this;this.$router.push(this.path),this.socket.on("sign-in",function(t){e.confirmSignIn(t)}),this.socket.on("sign-out",function(){e.confirmSignOut()}),this.socket.on("update-player-list",function(t){e.updatePlayerList(t)}),this.socket.on("update-room-list",function(t){e.updateRoomList(t)})},watch:{path:function(e){this.$router.push(e)},$route:function(e,t){"room"!==t.name||null==this.currentRoom?e.name:this.leaveRoom(this.currentRoom)}}},p=d,h=(r("5c0b"),r("2877")),g=Object(h["a"])(p,o,u,!1,null,null,null),v=g.exports,b=r("8c4f");n["a"].use(b["a"]);var y=new b["a"]({mode:"history",routes:[{path:"/",name:"home",component:function(){return r.e("about").then(r.bind(null,"bb51"))}},{path:"/arena",name:"arena",component:function(){return r.e("about").then(r.bind(null,"c710"))},meta:{requiresAuth:!0}},{path:"/arena/:room",name:"room",component:function(){return r.e("about").then(r.bind(null,"3ab1"))},meta:{requiresAuth:!0}}]});y.beforeEach(function(e,t,r){var n=e.matched.some(function(e){return e.meta.requiresAuth}),o=window.sessionStorage.getItem;n&&!o?r("/login"):r()});var w=y,C=r("a4bb"),R=r.n(C),k=r("5176"),S=r.n(k),O=(r("7514"),JSON.parse(window.sessionStorage.getItem("currentUser"))),U=window.sessionStorage.getItem("currentRoom");n["a"].use(c["a"]);var j=new c["a"].Store({state:{socket:null,currentUser:O,currentRoom:U,rooms:[],players:{},arenaChat:[],roomChat:[],colors:{}},getters:{socket:function(e){return e.socket},currentUser:function(e){return e.currentUser},currentUserId:function(e){return null===e.currentUser?null:e.currentUser.id},rooms:function(e){return e.rooms},roomPlayers:function(e){var t=e.rooms.find(function(t){return e.currentRoom===t.name}),r=t?t.players:[];return r.reduce(function(t,r){return t[r]=e.players[r],t},{})},arenaChat:function(e){return e.arenaChat.map(function(t){var r=e.players[t.userId],n=r||"player has left the arena...";return S()({},t,{name:n})})},roomChat:function(e){return e.roomChat.map(function(t){var r=e.players[t.userId],n=r||"player has left the arena...";return S()({},t,{name:n})})},playerColors:function(e){return R()(e.colors).reduce(function(t,r){return null!==e.colors[r]&&(t[e.colors[r]]=r),t},{})},colorMap:function(){return{red:"#ff5e69",blue:"#6bb5ff",yellow:"#fcff6a",orange:"#ffad69",green:"#6bff69",purple:"#d29bff",fuchsia:"fuchsia",aqua:"aqua"}}},mutations:{setSocket:function(e,t){return e.socket=t},setCurrentUser:function(e,t){window.sessionStorage.setItem("currentUser",s()(t)),e.currentUser=t},clearCurrentUser:function(e){window.sessionStorage.removeItem("currentUser"),e.currentUser=null},setCurrentRoom:function(e,t){window.sessionStorage.setItem("currentRoom",t),e.currentRoom=t},clearCurrentRoom:function(e){e.currentRoom=null,window.sessionStorage.removeItem("currentRoom")},updatePlayerList:function(e,t){return e.players=t},updateRoomList:function(e,t){return e.rooms=t},setArenaChat:function(e,t){return e.arenaChat=t},setRoomChat:function(e,t){return e.roomChat=t},clearRoomChat:function(e){return e.roomChat=[]},clearArenaChat:function(e){return e.arenaChat=[]},setColors:function(e,t){return e.colors=t}},actions:{requestSignIn:function(e,t){var r=e.getters;r.socket.emit("sign-in",t)},confirmSignIn:function(e,t){var r=e.commit;r("setCurrentUser",t)},requestSignOut:function(e){var t=e.getters;t.socket.emit("sign-out")},confirmSignOut:function(e){var t=e.commit;console.log("Signed Out"),t("clearRoomChat"),t("clearCurrentRoom"),t("clearArenaChat"),t("clearCurrentUser")},requestJoinRoom:function(e,t){var r=e.getters;r.socket.emit("enter-room",t)},confirmJoinRoom:function(e,t){var r=e.commit;r("setCurrentRoom",t)},requestLeaveRoom:function(e){var t=e.getters;t.socket.emit("leave-room")},confirmLeaveRoom:function(e){var t=e.commit;t("clearCurrentRoom"),t("clearRoomChat")},sendMessage:function(e,t){var r=e.getters,n=t.room,o=t.message;r.socket.emit("post-chat",{room:n,message:o,userId:r.currentUserId})}}}),I=r("9483");Object(I["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var q=r("0086"),A=r.n(q);n["a"].config.productionTip=!1,n["a"].use(r("2ead")),n["a"].use(A.a),new n["a"]({router:w,store:j,render:function(e){return e(v)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";var n=r("5e27"),o=r.n(n);o.a},"5e27":function(e,t,r){}});
//# sourceMappingURL=app.ed0793f1.js.map